<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æˆ‘ä»¬åˆ†æ‰‹å§ï¼</title>
  <!-- çƒŸèŠ±åº“ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #f5e6d3;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
      padding: 16px;
    }

    .container {
      background: white;
      width: 100%;
      max-width: 500px;
      padding: 32px 24px;
      border-radius: 32px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      text-align: center;
    }

    h1 {
      font-size: 2.8rem;
      font-weight: 700;
      color: #2d1f1f;
      margin-bottom: 12px;
      letter-spacing: -0.5px;
    }

    .sub {
      font-size: 1.4rem;
      color: #7a5a4a;
      margin-bottom: 32px;
      min-height: 2.5rem;
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 24px 0;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      background: #f0f0f0;
      padding: 14px 32px;
      font-size: 1.5rem;
      font-weight: 600;
      border-radius: 60px;
      cursor: pointer;
      transition: all 0.2s;
      min-width: 140px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      border: 1px solid #ddd;
      color: #333;
    }

    .btn-agree {
      background: #c8e6c9;
      color: #1e4a1e;
      border-color: #9fc89f;
    }

    .btn-refuse {
      background: #ffcdd2;
      color: #a33b3b;
      border-color: #ef9a9a;
    }

    .btn-small {
      font-size: 1.3rem;
      padding: 12px 24px;
      min-width: 120px;
    }

    .btn:active {
      transform: translateY(2px);
      box-shadow: 0 2px 3px rgba(0,0,0,0.1);
    }

    .message-box {
      background: #fff3e0;
      padding: 18px;
      border-radius: 40px;
      margin-top: 24px;
      font-size: 1.2rem;
      color: #4a3729;
      border: 2px dashed #cb9e7c;
    }

    .hidden {
      display: none !important;
    }

    .joker-block {
      background: #2b1e1e;
      color: #fceea7;
      padding: 20px;
      border-radius: 60px;
      margin: 16px 0;
    }

    .joker-icon {
      font-size: 2.8rem;
    }

    .copy-badge {
      background: #3d2c2c;
      display: inline-block;
      padding: 10px 24px;
      border-radius: 50px;
      font-family: monospace;
      font-size: 1.4rem;
      border: 1px solid #b58a5a;
      margin: 16px 0 8px;
      cursor: pointer;
      color: #fceea7;
    }

    .footer-note {
      margin-top: 24px;
      color: #aa8c78;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- çŠ¶æ€1: åˆ†æ‰‹é¡µ -->
    <div id="breakupState">
      <h1>ğŸ’” æˆ‘ä»¬åˆ†æ‰‹å§ï¼</h1>
      <div class="sub">âš¡ æœ€åçš„å†³å®š âš¡</div>
      <div class="button-row">
        <button class="btn btn-agree" id="agreeBreakup">åŒæ„</button>
        <button class="btn btn-refuse" id="refuseBreakup">ä¸åŒæ„</button>
      </div>
      <div class="message-box">ğŸ‘† é€‰ä¸€ä¸ªå§</div>
    </div>

    <!-- çŠ¶æ€2: å¤åˆé¡µ (åˆå§‹éšè—) -->
    <div id="reconcileState" class="hidden">
      <h1>ğŸ¥º æˆ‘ä»¬å¤åˆå§ï¼</h1>
      <div class="sub">ğŸ’ å†è€ƒè™‘ä¸€ä¸‹</div>
      <div class="button-row">
        <button class="btn btn-small btn-agree" id="agreeReconcile">åŒæ„ ğŸ’–</button>
        <button class="btn btn-small btn-refuse" id="refuseReconcile">è¿˜æ˜¯ä¸è¦</button>
      </div>
      <div class="message-box">âœ¨ ä½ è¯´äº†ç®— âœ¨</div>
    </div>

    <!-- çŠ¶æ€3: å°ä¸‘ç»“å±€ (åˆå§‹éšè—) -->
    <div id="jokerState" class="hidden">
      <h1>ğŸ¤¡ å°ä¸‘æ—¶åˆ»</h1>
      <div class="sub joker-block">
        <span class="joker-icon">ğŸª</span> ä½ è¢«è€äº†ï¼ <span class="joker-icon">ğŸª</span>
      </div>
      
      <div class="message-box" style="flex-direction: column; gap: 12px; display: flex;">
        <div style="font-size: 1.8rem;">ğŸ¤¡ ç»™å‰ä»»ç§ä¿¡ 666 ğŸ’Œ</div>
        <div class="copy-badge" id="copy666">ğŸ“¨ 666 (ç‚¹æˆ‘å¤åˆ¶)</div>
        <button class="btn btn-small" id="backToStart" style="background: #d9c2b0; margin-top: 8px;">â†º è¿”å›å¼€å§‹</button>
      </div>
      <div class="footer-note">ğŸ‘» æ¸¸æˆç»“æŸ</div>
    </div>

    <div class="footer-note">â¤ï¸ è½»é‡ç‰ˆ Â· é€‰æ‹©å³æˆå‰§</div>
  </div>

  <script>
    (function() {
      // è·å–ä¸‰ä¸ªçŠ¶æ€å®¹å™¨
      const breakup = document.getElementById('breakupState');
      const reconcile = document.getElementById('reconcileState');
      const joker = document.getElementById('jokerState');

      // æŒ‰é’®
      const agreeBreakup = document.getElementById('agreeBreakup');
      const refuseBreakup = document.getElementById('refuseBreakup');
      const agreeReconcile = document.getElementById('agreeReconcile');
      const refuseReconcile = document.getElementById('refuseReconcile');
      const backBtn = document.getElementById('backToStart');
      const copyBtn = document.getElementById('copy666');

      // æ˜¾ç¤ºæŒ‡å®šçŠ¶æ€
      function show(state) {
        breakup.classList.add('hidden');
        reconcile.classList.add('hidden');
        joker.classList.add('hidden');
        if (state === 'breakup') breakup.classList.remove('hidden');
        else if (state === 'reconcile') reconcile.classList.remove('hidden');
        else if (state === 'joker') joker.classList.remove('hidden');
      }

      // çƒŸèŠ± - åŠ å¼ºç‰ˆï¼Œç¡®ä¿è§¦å‘
      function fireworks() {
        // å¤šæ¬¡è§¦å‘ç¡®ä¿çœ‹åˆ°æ•ˆæœ
        confetti({ particleCount: 150, spread: 100, origin: { y: 0.5 } });
        setTimeout(() => {
          confetti({ particleCount: 120, spread: 120, startVelocity: 30, colors: ['#ff4d6d', '#ffb3c6'] });
        }, 150);
        setTimeout(() => {
          confetti({ particleCount: 100, spread: 80, origin: { y: 0.4, x: 0.3 }, colors: ['#ffd700', '#c0c0c0'] });
        }, 300);
        setTimeout(() => {
          confetti({ particleCount: 80, spread: 60, origin: { y: 0.6, x: 0.7 }, startVelocity: 35 });
        }, 450);
        
        // æ§åˆ¶å°è¾“å‡ºç¡®è®¤ï¼ˆè°ƒè¯•ç”¨ï¼‰
        console.log('ğŸ† çƒŸèŠ±ç»½æ”¾ï¼');
      }

      // å°ä¸‘æç¤º + ç§ä¿¡
      function triggerJoker() {
        alert('ğŸ¤¡ å°ä¸‘æç¤ºï¼šç»™å‰ä»»ç§ä¿¡666ï¼');
        console.log('ğŸ“¨ ç§ä¿¡å‰ä»»: 666');
        show('joker');
      }

      // äº‹ä»¶ç»‘å®š - ç¡®ä¿æ‰€æœ‰æŒ‰é’®éƒ½å­˜åœ¨ä¸”ç»‘å®šæ­£ç¡®
      if (agreeBreakup) {
        agreeBreakup.addEventListener('click', function(e) {
          console.log('åŒæ„åˆ†æ‰‹è¢«ç‚¹å‡»'); // è°ƒè¯•ç”¨
          fireworks();  // æ”¾çƒŸèŠ±ï¼Œä¸è·³è½¬
        });
      } else {
        console.error('æ‰¾ä¸åˆ°åŒæ„åˆ†æ‰‹æŒ‰é’®');
      }

      if (refuseBreakup) {
        refuseBreakup.addEventListener('click', function() {
          console.log('ä¸åŒæ„åˆ†æ‰‹è¢«ç‚¹å‡»');
          show('reconcile');
        });
      }

      if (agreeReconcile) {
        agreeReconcile.addEventListener('click', function() {
          console.log('å¤åˆé¡µåŒæ„è¢«ç‚¹å‡»');
          triggerJoker();
        });
      }

      if (refuseReconcile) {
        refuseReconcile.addEventListener('click', function() {
          console.log('å¤åˆé¡µæ‹’ç»è¢«ç‚¹å‡»');
          show('breakup');
        });
      }

      if (backBtn) {
        backBtn.addEventListener('click', function() {
          console.log('è¿”å›æŒ‰é’®è¢«ç‚¹å‡»');
          show('breakup');
        });
      }

      // å¤åˆ¶666åŠŸèƒ½
      if (copyBtn) {
        copyBtn.addEventListener('click', function() {
          navigator.clipboard?.writeText('666').then(() => {
            alert('ğŸ’Œ å·²å¤åˆ¶ 666ï¼Œå¯ä»¥ç§ä¿¡äº†');
          }).catch(() => {
            alert('æ‰‹åŠ¨å¤åˆ¶: 666');
          });
        });
      }

      // å¯åŠ¨æ—¶æ˜¾ç¤ºåˆ†æ‰‹é¡µ
      show('breakup');
      
      // é¢å¤–æµ‹è¯•ï¼šç¡®è®¤confettiå¯ç”¨
      if (typeof confetti !== 'function') {
        console.error('confettiåº“åŠ è½½å¤±è´¥');
      } else {
        console.log('confettiåº“å·²åŠ è½½');
      }
    })();
  </script>
</body>
</html>